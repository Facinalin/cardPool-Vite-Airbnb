import{d as h,a as d}from"./index-14e50f67.js";import{S as i}from"./sweetalert2.all-742031dd.js";const{VITE_APP_URL2:s,VITE_APP_PATH:n}={VITE_APP_URL:"https://card-pool-json-vercel.vercel.app",VITE_APP_URL2:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"lk1025cina",BASE_URL:"/cardPool-Vite-Airbnb/",MODE:"production",DEV:!1,PROD:!0},u=h("cartsStore",{state:()=>({carts:[],number:0,total:0,final_total:0,loadingStatus:{loadingItem:""},cardGroupCart:[],ifDomestic:!1,ifInternational:!1,ifComplement:!1,domesticAmount:0,InternationalAmount:0,danceTemp:null,curCartId:""}),actions:{getCart(){const r=`${s}/api/${n}/cart`;d.get(r).then(t=>{this.carts=t.data.data.carts.filter(e=>e.category==="一般"||e.category==="出卡");const a=this.carts.reduce((e,o)=>e+o.total,0);this.final_total=a,this.number=this.carts.length}).catch(t=>{i.fire({position:"center",icon:"error",title:`${t.message}`,showConfirmButton:!1,timer:1800})})},deleteAllCartToOrder(r){const t=`${s}/api/${n}/carts`;d.delete(t).then(a=>{this.carts=[],this.loadingStatus.loadingItem="",this.getCart()}).catch(a=>{this.loadingStatus.loadingItem="",i.fire({position:"center",icon:"error",title:`${a.message}`,showConfirmButton:!1,timer:1800})}),this.getCart()},addToCart(r,t=1){this.loadingStatus.loadingItem=r;let a="post",e=`${s}/api/${n}/cart`,o={};const c=this.carts.find(l=>l.productId===r);c?(a="put",e=`${s}/api/${n}/cart/${c.id}`,o={...c,qty:c.qty+t}):o={product_id:r,qty:t,category:"一般"},d[a](e,{data:o}).then(l=>{this.loadingStatus.loadingItem="",i.fire({position:"center",icon:"success",title:"成功加入購物車!",showConfirmButton:!1,timer:1800}),this.getCart()}).catch(l=>{this.loadingStatus.loadingItem="",i.fire({position:"center",icon:"error",title:`${l.message}`,showConfirmButton:!1,timer:1800})})},getCardGroupCart(){const r=`${s}/api/${n}/cart`;d.get(r).then(t=>{const a=t.data.data.carts;this.cardGroupCart=a.filter(e=>e.category==="拆卡"),this.total=t.data.data.total,this.final_total=t.data.data.final_total}).catch(t=>{i.fire({position:"center",icon:"error",title:`${t.message}`,showConfirmButton:!1,timer:1800})})}}});export{u as c};
