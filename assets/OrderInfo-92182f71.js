import{c as p}from"./cartsStore-1cbb6115.js";import{_ as v,a as b,m as V,b as O,c as g,f as l,w as S,D as x,r as u,o as P,e,C as c,t as f,L as A,M as w}from"./index-14e50f67.js";import{S as _}from"./sweetalert2.all-742031dd.js";const{VITE_APP_URL2:T,VITE_APP_PATH:y}={VITE_APP_URL:"https://card-pool-json-vercel.vercel.app",VITE_APP_URL2:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"lk1025cina",BASE_URL:"/cardPool-Vite-Airbnb/",MODE:"production",DEV:!1,PROD:!0},E={data(){return{ifFirstStep:!0,ifSecondStep:!1,ifThirdStep:!1,perOrder:{data:{user:{name:"",email:"",tel:"",address:""},message:""}},apiUrl:"https://vue3-course-api.hexschool.io/v2",apiPath:"lk1025cina",message:""}},methods:{phoneVali(a){return/^(09)\d{8}$/.test(a)?!0:"請填入正確的電話號碼！"},emailVali(a){return/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[A-Za-z]+$/.test(a)?!0:"請填入正確的電子郵件！"},isRequired(a){return a?!0:"此欄位為必填！"},postNewOrder(a){const s=`${T}/api/${y}/order`;b.post(s,{data:a}).then(i=>{console.log(i.data),this.ifFirstStep=!1,this.ifSecondStep=!0,this.deleteAllCartToOrder(),console.log("這是store的",this.ifFirstStep,this.ifSecondStep),_.fire({position:"center",icon:"success",title:`${i.message}`,showConfirmButton:!1,timer:1800})}).catch(i=>{console.log(i),_.fire({position:"center",icon:"error",title:`${i.message}`,showConfirmButton:!1,timer:1800})})},cartToOrder(a){JSON.stringify(a,null,2)||alert("無法提交"),this.$emit("postNewOrder",this.perOrder)},...V(p,["getCart"])},mounted(){this.getCart()},computed:{...O(p,["carts"])}},C={key:0,class:"my-5 row d-flex justify-content-center"},I={class:"mb-3"},U=e("label",{for:"email",class:"form-label me-2"},"Email",-1),k={name:"email",class:"invalid-feedback"},N={class:"mb-3"},R=e("label",{for:"name",class:"form-label me-2"},"收件人姓名",-1),B={name:"name",class:"invalid-feedback"},D={class:"mb-3"},L=e("label",{for:"tel",class:"form-label me-2"},"收件人電話",-1),z={name:"tel",class:"invalid-feedback"},q={class:"mb-3"},F=e("label",{for:"address",class:"form-label me-2"},"收件人地址",-1),M={name:"address",class:"invalid-feedback"},Z={class:"mb-3"},j=e("label",{for:"message",class:"form-label"},"備註",-1),H=e("div",{class:"text-end"},[e("button",{type:"submit",class:"btn btn-primary text-white bd-rd-12"},"下一步")],-1);function J(a,s,i,G,t,n){const d=u("font-awesome-icon"),m=u("v-field"),h=u("v-form");return a.carts.length>0?(P(),g("div",C,[l(h,{ref:"form",class:"vform",onSubmit:n.cartToOrder},{default:S(({errors:r})=>[e("div",I,[U,l(d,{icon:"fa-solid fa-star-of-life",class:"text-mainorange modalIcon fs-7"}),l(m,{id:"email",name:"email",type:"email",class:c(["form-control custom-vf",{"is-invalid":r.email}]),placeholder:"請輸入 Email",rules:n.emailVali,modelValue:t.perOrder.data.user.email,"onUpdate:modelValue":s[0]||(s[0]=o=>t.perOrder.data.user.email=o)},null,8,["class","rules","modelValue"]),e("p",k,f(r.email),1)]),e("div",N,[R,l(d,{icon:"fa-solid fa-star-of-life",class:"text-mainorange modalIcon fs-7"}),l(m,{id:"name",name:"name",type:"text",class:c(["form-control custom-vf",{"is-invalid":r.name}]),placeholder:"請輸入訂購人姓名",rules:n.isRequired,modelValue:t.perOrder.data.user.name,"onUpdate:modelValue":s[1]||(s[1]=o=>t.perOrder.data.user.name=o)},null,8,["class","rules","modelValue"]),e("p",B,f(r.name),1)]),e("div",D,[L,l(d,{icon:"fa-solid fa-star-of-life",class:"text-mainorange modalIcon fs-7"}),l(m,{id:"tel",name:"tel",type:"tel",class:c(["form-control custom-vf",{"is-invalid":r.tel}]),placeholder:"請輸入電話",modelValue:t.perOrder.data.user.tel,"onUpdate:modelValue":s[2]||(s[2]=o=>t.perOrder.data.user.tel=o),rules:n.phoneVali},null,8,["modelValue","class","rules"]),e("p",z,f(r.tel),1)]),e("div",q,[F,l(d,{icon:"fa-solid fa-star-of-life",class:"text-mainorange modalIcon fs-7"}),l(m,{id:"address",name:"address",type:"text",class:c(["form-control custom-vf",{"is-invalid":r.address}]),placeholder:"請輸入地址",rules:n.isRequired,modelValue:t.perOrder.data.user.address,"onUpdate:modelValue":s[3]||(s[3]=o=>t.perOrder.data.user.address=o)},null,8,["rules","class","modelValue"]),e("p",M,f(r.address),1)]),e("div",Z,[j,A(e("textarea",{id:"message",class:"form-control custom-vf",cols:"30",rows:"3","onUpdate:modelValue":s[4]||(s[4]=o=>t.perOrder.data.message=o)},null,512),[[w,t.perOrder.data.message]])]),H]),_:1},8,["onSubmit"])])):x("",!0)}const X=v(E,[["render",J]]);export{X as default};
